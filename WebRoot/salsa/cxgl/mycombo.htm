<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>套餐单</title>
		<base target="_self"/>
		<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
		<link href="css/style1.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" type="text/css" href="css/ext-all3.4.css" />
        <object id="LODOP" classid="clsid:2105C259-1E0C-4534-8141-A753534CB4CA" width=0 height=0> 
        </object> 
		<SCRIPT LANGUAGE="JavaScript" src="inc/check.js"></SCRIPT>
		<script src="inc/dateams.js" type=text/javascript></script>
		<script type="text/javascript" src="js/extjs/ext-base3.4.js"></script>
		<script type="text/javascript" src="js/extjs/ext-all3.4.js"></script>
        <script type="text/javascript" src="js/extjs/CheckColumn.js"></script>
		<script type="text/javascript" src="js/extjs/ext-lang-zh_CN.js"></script>
		<script type="text/javascript" src="js/extjs/GroupSummary.js"></script>
        <script type="text/javascript" src="js/extjs/RowExpander.js"></script>
		
		<script type='text/javascript' src='dwr/engine.js'></script>
		<script type='text/javascript' src='dwr/util.js'></script><script type='text/javascript' src='dwr/interface/DwrComm.js'></script>
        <style type="text/css">
.order_bit {
     font-size:12px;
}
.x-grid-record-ismust{background: #B6B4C0;}
.x-grid-record-is_stand{background: #006F00;}
</style>
        <script type="text/javascript">
     function opr(url){
        
        var s=NewWinCustMD(url+'&tmp11='+Math.random(),window,450,650);
     }
	 
	  function seeMore(bm,id,sl)
	 {
		  //alert("d="+bm+"  b="+id);
		  opr('display?proname=cxgl/kbd_instand.htm&ass_code='+bm+'&ID='+id+'&SL='+sl);
	 }
	 
</script>

	</head>

	<body>
		<script type='text/javascript'>
Ext.onReady(function(){
    if (typeof window['DWRUtil'] == 'undefined') window.DWRUtil = dwr.util;
    var formMap = DWRUtil.getValues("form1");
    var isOprSave=false;
	
	
    //产品列表存储
    var orderDetailstore = new Ext.data.JsonStore({
         url:"work?proname=MJ0S58",
        root:"root",
        fields: ['group_name','spbm','psid','spmc','xhgg','product_len','jldw','ass_num','dj','yj','je','is_must','is_stand','limit_num','pcs_dj','code','xh','bz']
    });

    var fm=Ext.form;
    //产品列表表格
     var cm = new Ext.grid.ColumnModel([
         new Ext.grid.RowNumberer(),//自动行号
        
       
		{header:'组名称',dataIndex:'group_name',width: 80},
        {header:'名称型号',dataIndex:'spmc',width: 260},
        {header:'规格',dataIndex:'xhgg',width: 130},
		{header:'长度',dataIndex:'product_len',width: 50},
        {header:'单位',dataIndex:'jldw',width: 50},
		{header:'数量',dataIndex:'ass_num',width: 50,summaryType:'sum'},
		{header:'金额',dataIndex:'je',renderer:Ext.util.Format.usMoney,width: 80,summaryType:'sum'},
		
		
		
        {header:'备注',dataIndex:'bz',width: 90}
		  
       
       ]);
	   
	   
	
    //商品列表表格
    var summary = new Ext.ux.grid.GridSummary(); 
    var grid = new Ext.grid.EditorGridPanel({
    	el: 'productList',
    	width:document.body.clientWidth-25, 
    	height:320,
    	title:'套餐明细',
    	ds: orderDetailstore,
        cm: cm,
		
        frame:false,
         plugins: new Ext.ux.grid.GridSummary(),
        clicksToEdit:1,
        stripeRows:true,
        columnLines: true,
		enableHdMenu:false,
		viewConfig: {
            forceFit: true
        },
        selModel: new Ext.grid.RowSelectionModel({singleSelect:false}),
        loadMask: true,
        loadMask:{msg:'正在加载数据...'}
        
        
    });
    grid.render();
    orderDetailstore.load({params:{ComboId:'@@ComboId,'}});
	
	
	
	
  	 Ext.get("BtnPrint").on("click",function(){
       
        
		  NewWinMD('@@LS.URL,/display?proname=print/xsd_print_combo.htm&Back_Code='+form1.Back_Code.value+'&ComboId=@@ComboId,&time='+Math.random(),window);      
      
        
   }); 
	
	



   

 

   
   

   //关闭
  Ext.get("BtnClose").on("click",function(){
      if(isOprSave == true){
           
            var arg;
	   if (window.opener) {
	      arg=window.opener;
       }
        else {
	      arg=window.dialogArguments;
       }
            arg.document.getElementById('d_Flag').value="1";
       }
       window.close();
    
   }); 
   
 
   
   
  
  
    
   
});
</script>
		<form name="form1" method="post" action="" id="form1">
            <input type="hidden" name="d_Flag" value="0" id="d_Flag">
			<input type="hidden" name="d_JsonData" value="" id="d_JsonData">
			<input type="hidden" name="d_SPBM" id="d_SPBM">
			<input type="hidden" name="SH_FLAG" id="SH_FLAG">
            <input type="hidden" name="Back_Code" id="Back_Code" value="@@Back_Code,">
			
			<table width="100%" border="0">
				<tr>
					<td colspan="2">
						<table width="100%" border="0" align="center" cellpadding="1"
							cellspacing="0">

							<tr>
								<td colspan="10" align="center">
									<table cellSpacing=0 cellPadding=0 border="0" width="100%">
										<tr height="30">
											<td align="center"
												style="font-size: 12pt; COLOR: #124164; FONT-WEIGHT: bold;">产品套餐</td>
										</tr>
									</table>								</td>
							</tr>
							<tr class="tabletoptitle">
							  <td align="right">&nbsp;</td>
							  <td width="90%" colspan="3">&nbsp;</td>
						  </tr>
							<tr class="tabletoptitle">
								<td align="right" width="10%"></td>
							    <td colspan="3"><input type="text" name="Product_Color" size="35" readonly  class="TEXTDISABLED" value="!!MJ0S77,02" style="color:#0000FF ">								<input type="hidden" name="ID" id="ID" size="20" value="@@ID,">
							      
								套餐价格：
							      <input type="text" name="Product_Price" id="Product_Price" value="!!MJ0S77,03" size="10" readonly  class="TEXTDISABLED" ></td>
							</tr>
							
						</table>					</td>
				</tr>

				<tr>
					<td colspan="2">
						<table width="100%" border="0">
							<tr class="tabletoptitle">
								<td width="41%" align="center">&nbsp;</td>
								<td width="59%"><input type="button" name="BtnClose" id="BtnClose" value="关  闭">
							  <input type="button" name="BtnPrint"  id="BtnPrint" value="打  印">						</td>
							</tr>
						</table>					</td>
				</tr>
				<tr>
					<td colspan="2">
						<div id='productList'></div>					</td>
				</tr>
				

				
			</table>

		</form>

	</body>
</html>
